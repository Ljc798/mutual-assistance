<view class="reputation-page">
    <view class="sticky-reputation-header">
        <image class="back-btn" src="/assets/icons/fanhui.svg" bindtap="handleBack" />
        <view class="reputation-header">ä¿¡èª‰ç³»ç»Ÿ</view>
    </view>
    <!-- é¡¶éƒ¨ä¿¡èª‰æ€»è§ˆ -->
    <view class="header-card">
        <text class="title">æˆ‘çš„ä¿¡èª‰åˆ†</text>
        <text class="score">{{reputation.total_score}}</text>
        <text class="level">ï¼ˆ{{creditLevel}}ï¼‰</text>

        <view class="stars">
            <block wx:for="{{5}}" wx:key="*this">
                <image class="star" src="{{index < starCount ? '/assets/icons/star-fill.svg' : '/assets/icons/star-empty.svg'}}" />
            </block>
        </view>
    </view>

    <!-- åŸºæœ¬ç»Ÿè®¡ -->
    <view class="stats-section">
        <view class="stat-item">
            <text>âœ… å®Œæˆä»»åŠ¡</text>
            <text>{{reputation.completed_tasks}}</text>
        </view>
        <view class="stat-item">
            <text>âŒ å–æ¶ˆä»»åŠ¡</text>
            <text>{{reputation.canceled_tasks}}</text>
        </view>
        <view class="stat-item">
            <text>ğŸš¨ è¢«ä¸¾æŠ¥æ¬¡æ•°</text>
            <text>{{reputation.reports_received}}</text>
        </view>
    </view>

    <!-- ä¿¡èª‰ç§¯åˆ†ç»†åˆ™ -->
    <view class="rules-section">
        <text class="section-title">ğŸ“œ ä¿¡èª‰ç§¯åˆ†ç»†åˆ™</text>

        <block wx:for="{{rules}}" wx:key="id">
            <view class="rule-item">
                <view class="rule-left">
                    <text class="event">{{item.description}}</text>
                    <text class="severity">å½±å“ï¼š{{item.severity}}</text>
                </view>
                <text class="score-delta" style="color: {{item.score_delta > 0 ? '#00b26a' : '#ff4d4f'}}">
                    {{item.score_delta > 0 ? '+' : ''}}{{item.score_delta}}
                </text>
            </view>
        </block>
    </view>


    <!-- æ˜ç»†è®°å½• -->
    <view class="log-section">
        <text class="section-title">ä¿¡èª‰å˜åŠ¨è®°å½•</text>
        <block wx:for="{{logs}}" wx:key="id">
            <view class="log-item">
                <text class="log-reason">{{item.reason}}</text>
                <text class="log-delta" style="color: {{item.score_delta >= 0 ? '#00b26a' : '#ff4d4f'}}">
                    {{item.score_delta >= 0 ? '+' : '-'}}{{item.score_delta}}
                </text>
            </view>
        </block>
    </view>

    <!-- åº•éƒ¨æç¤º -->
    <view class="tips">
        <text>ä¿æŒè‰¯å¥½è¡Œä¸ºï¼Œå¤šå®Œæˆä»»åŠ¡å¯æå‡ä¿¡èª‰ç­‰çº§ï½</text>
    </view>
</view>