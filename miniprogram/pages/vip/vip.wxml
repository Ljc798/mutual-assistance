<view class="vip-center">
    <!-- 顶部导航栏 -->
    <view class="sticky-vip-header">
        <image class="back-btn" src="/assets/icons/fanhui.svg" bindtap="goBack" />
        <view class="vip-header">会员中心</view>
    </view>

    <!-- 用户信息区 -->
    <view class="user-info">
        <image class="avatar" src="{{user.avatar_url}}" mode="aspectFill"></image>
        <view class="user-meta">
            <text class="nickname">{{user.username}}</text>
            <text class="expire">到期时间：
            <text class="date">{{user.vip_expire_time}}</text>
            </text>
        </view>
        <view class="compare-btn" bindtap="showBenefitPopup">权益对比</view>
    </view>

    <!-- VIP / SVIP tab -->
    <view class="tab-bar">
        <view class="tab {{activeTab === 'vip' ? 'active' : ''}}" data-tab="vip" bindtap="switchTab">VIP</view>
        <view class="tab {{activeTab === 'svip' ? 'active' : ''}}" data-tab="svip" bindtap="switchTab">SVIP</view>
    </view>

    <!-- 套餐横向滚动区 -->
    <view class="plan-scroll-wrapper">
        <scroll-view scroll-x class="plan-scroll">
            <block wx:for="{{plans}}" wx:key="id">
                <view class="plan-card {{selectedPlanId === item.id ? 'active' : ''}}" bindtap="selectPlan" data-id="{{item.id}}">
                    <text class="plan-name">{{item.name}}</text>
                    <text class="plan-price">¥{{item.promo_price}}</text>
                    <text class="plan-original">¥{{item.original_price}}</text>
                </view>
            </block>
            <view style="display:inline-block;width:45rpx;"></view>
        </scroll-view>
    </view>

    <button class="pay-btn" bindtap="payNow">立即支付</button>

    <!-- 会员特权展示 -->
    <view class="benefit-section">
        <text class="section-title">会员特权</text>
        <view class="benefit-grid">
            <view class="benefit-item" wx:for="{{benefits}}" wx:key="name">
                <image class="benefit-icon" src="{{item.icon}}" mode="aspectFit"></image>
                <text class="benefit-name">{{item.name}}</text>
            </view>
        </view>
    </view>

    <!-- 权益对比悬浮窗 -->
    <view class="popup-mask" wx:if="{{showPopup}}" bindtap="closePopup">
        <view class="popup" catchtap="noop">
            <view class="popup-header">会员权益对比</view>
            <scroll-view scroll-y class="popup-body">
                <view class="popup-row header-row">
                    <text class="right-name">权益项</text>
                    <text class="right-free">普通</text>
                    <text class="right-vip">VIP</text>
                    <text class="right-svip">SVIP</text>
                </view>
                <view class="popup-row">
                    <view class="right-name"><text class="label">免佣金次数</text></view>
                    <text class="right-free">共5次</text>
                    <text class="right-vip">10/月</text>
                    <text class="right-svip">无限</text>
                </view>
                <view class="popup-row">
                    <view class="right-name"><text class="label">任务展示优先级</text></view>
                    <text class="right-free">普通</text>
                    <text class="right-vip">高</text>
                    <text class="right-svip">最高</text>
                </view>
                <view class="popup-row">
                    <view class="right-name"><text class="label">商城折扣</text></view>
                    <text class="right-free">-</text>
                    <text class="right-vip">95折</text>
                    <text class="right-svip">9折</text>
                </view>
                <view class="popup-row">
                    <view class="right-name"><text class="label">AI调用额度</text></view>
                    <text class="right-free">5/天</text>
                    <text class="right-vip">25/天</text>
                    <text class="right-svip">无限</text>
                </view>
                <view class="popup-row">
                    <view class="right-name"><text class="label">AI响应速度</text></view>
                    <text class="right-free">标准</text>
                    <text class="right-vip">快速</text>
                    <text class="right-svip">极速</text>
                </view>
                <view class="popup-row">
                    <view class="right-name"><text class="label">算法权重</text></view>
                    <text class="right-free">1.0</text>
                    <text class="right-vip">1.2</text>
                    <text class="right-svip">1.5</text>
                </view>
                <view class="popup-row">
                    <view class="right-name">
                        <text class="label">任务保障金 <text class="sup">1</text></text>
                    </view>
                    <text class="right-free">0</text>
                    <text class="right-vip">50%</text>
                    <text class="right-svip">100%</text>
                </view>
                <view class="popup-row">
                    <view class="right-name">
                        <text class="label">任务激励 <text class="sup">2</text></text>
                    </view>
                    <text class="right-free">-</text>
                    <text class="right-vip">3%</text>
                    <text class="right-svip">8%</text>
                </view>
                <view class="popup-row">
                    <view class="right-name">
                        <text class="label">发单折扣 <text class="sup">2</text></text>
                    </view>
                    <text class="right-free">-</text>
                    <text class="right-vip">3%</text>
                    <text class="right-svip">8%</text>
                </view>
                <view class="popup-row">
                    <view class="right-name">
                        <text class="label">保证金减免 <text class="sup">3</text></text>
                    </view>
                    <text class="right-free">-</text>
                    <text class="right-vip">20%</text>
                    <text class="right-svip">100%</text>
                </view>
                <view class="popup-row">
                    <view class="right-name"><text class="label">积分信誉分加倍</text></view>
                    <text class="right-free">-</text>
                    <text class="right-vip">1.5倍</text>
                    <text class="right-svip">2倍</text>
                </view>
                <view class="popup-row">
                    <view class="right-name"><text class="label">会员徽章</text></view>
                    <text class="right-free">-</text>
                    <view class="right-vip badge-cell"><image class="badge-img-vip" src="/assets/icons/vip-2.svg" mode="aspectFit" /></view>
                    <view class="right-svip badge-cell"><image class="badge-img-svip" src="/assets/icons/svip.svg" mode="aspectFit" /></view>
                </view>
            </scroll-view>
            <view class="popup-footnotes">
                <view class="note">1.任务保障金：按成交价比例发放，每月最高50元。</view>
                <view class="note">2.任务激励与发单折扣：VIP每月累计最高20元，SVIP每月最高40元，超过部分不再累积。</view>
                <view class="note">3.保证金减免：根据等级按比例减免，SVIP可全免。</view>
            </view>
            <button class="close-btn" bindtap="closePopup">我知道了</button>
        </view>
    </view>

    <view class="vip-footer">更多功能推出中，敬请期待～</view>
</view>